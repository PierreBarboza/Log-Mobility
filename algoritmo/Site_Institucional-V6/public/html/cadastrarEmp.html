<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="../css/header-footer.css" type="text/css" />
  <link rel="stylesheet" href="../css/cadastrarEmp.css" type="text/css" />
  <link rel="shortcut icon" href="../img/Icon-LM.png" type="image/x-icon" />
  <title>Cadastro de empresa</title>
  <script src="../js/funcoes.js"></script>
</head>

<body>
  <!------------------------------HEADER DO SITE ----------------------------------------- -->
  <div class="header-da-gestao">
    <div class="container-navbar">
      <div class="brand-sptrans">
        <!----LOGO--->
        <img src="../img/SPTrans_logo.png" alt="" width="70px" />
      </div>

      <ul class="navbar-da-gestao">
        <li class="pagina-atual">
          <a href="cadastrarEmp.html">
            Cadastrar<br />
            Empresas
          </a>
        </li>
        <li>
          <a href="empCadast-cheio.html">
            Empresas<br />
            Cadastradas
          </a>
        </li>
        <li>
          <a href="../index.html"> Sair</a>
        </li>
      </ul>
    </div>
  </div>
  <!---------------------------------CORPO DO SITE------------------------------------------>
  <div class="bannerCadastrarEmp">
    <div class="containerCadastrarEmp">
      <h1>Cadastro de Empresa</h1>
      <div class="form-boxCadastrarEmp">
        <h4>Nome da Empresa:</h4>
        <input id="input_nomeEmpresa" type="text" />
        <h4>CNPJ:</h4>
        <input id="input_CNPJ" type="text" />
        <h4>Rua:</h4>
        <input id="input_rua" type="text" />
        <h4>Numero:</h4>
        <input id="input_numero" type="text" />
        <h4>Bairro:</h4>
        <input id="input_bairro" type="text" />
        <h4>Cidade:</h4>
        <input id="input_cidade" type="text" />
        <h4>Estado:</h4>
        <input id="input_estado" type="text" />
        <h4>CEP:</h4>
        <input id="input_CEP" type="text" />
        <h4>Telefone (1):</h4>
        <input id="input_telefone1" type="text" />
        <h4>Telefone (2):</h4>
        <input id="input_telefone2" type="text" />
        <h4>Email do usuario:</h4>
        <input id="input_emailUsuario" type="text" />
        <h4>Senha do Usuario:</h4>
        <input id="input_senhaUsuario" type="text" />
        <select id="slt_nomeEmpresa">Empresa
          <option value="0">Selecione a empresa</option>
          <option value="2">MOBIBRASIL</option>
          <option value="3">Move Bus</option>
          <option value="1">SPTrans</option>
      </select>
        
      </div>
      <div class="containerbtn">
        <a onclick="a_limpar()">Limpar</a>
        <a onclick="cadastro()">Cadastrar</a>
      </div>
    </div>
  </div>
  <!---------------------------------RODAPÉ DO SITE------------------------------------------>
  <div class="footer">
    <div class="container">
      <div class="Boxtext">
        <h2>Saiba Mais</h2>
        <p><a href="termos-de-uso.html">Termos de Uso</a></p>
      </div>
      <div class="Boxtext">
        <h2>Atendimento</h2>
        <p>suporte@logmobility.com</p>
        <p>(11) 1234-5678</p>
      </div>
      <div class="RedesSocias">
        <h2>Redes Sociais</h2>
        <div class="BoxImgs">
          <img src="../img/logo-instagram.png" width="30px" alt="" />
          <img src="../img/logo-facebook.png" width="30px" alt="" />
          <img src="../img/logo-twitter.png" width="30px" alt="" />
        </div>
      </div>
    </div>

    <div class="direitos">
      Log Mobility - 2022 Todos os direitos reservados
    </div>
  </div>
</body>
</html>
<script>
  function cadastro() { 
      var nomeEmpresaCadasVar = input_nomeEmpresa.value;
      var cnpjEmpresaCadasVar = input_CNPJ.value;
      var ruaEmpresaCadasVar = input_rua.value;
      var numeroEmpresaCadasVar = input_numero.value;
      var bairroEmpresaCadasVar = input_bairro.value;
      var cidadeEmpresaCadasVar = input_cidade.value;
      var estadoEmpresaCadasVar = input_estado.value;
      var cepEmpresaCadasVar = input_CEP.value;
      var tel1EmpresaCadasVar = input_telefone1.value;
      var tel2EmpresaCadasVar = input_telefone2.value;
      var emailUsuarioVar = input_emailUsuario.value;
      var senhaUsuarioVar = input_senhaUsuario.value;
      var nomeEmpresaUsuarioVar = slt_nomeEmpresa.value;

      //Validações dos dados
      if (
        nomeEmpresaCadasVar == "" || cnpjEmpresaCadasVar == "" || ruaEmpresaCadasVar == "" || numeroEmpresaCadasVar == "" ||
        bairroEmpresaCadasVar == "" || cidadeEmpresaCadasVar == "" || estadoEmpresaCadasVar == "" || cepEmpresaCadasVar == "" ||
        tel1EmpresaCadasVar == "" || tel2EmpresaCadasVar == ""  || emailUsuarioVar == ""|| senhaUsuarioVar == ""|| nomeEmpresaUsuarioVar == ""
        ) {
          alert ("Existem campos não preenchidos")

      } else if (cnpjEmpresaCadasVar.length != 15 ){
        alert ("CNPJ invalido !")

      } else if (emailUsuarioVar.indexOf("@") == -1){
        alert ("Email invalido !")
      }


      // Enviando o valor da nova input
      fetch("/usuarios/cadastrar", {
          method: "POST",
          headers: {
              "Content-Type": "application/json"
          },
          body: JSON.stringify({
              // crie um atributo que recebe o valor recuperado aqui
              // Agora vá para o arquivo routes/usuario.js              
              nomeEmpresaCadasServer : nomeEmpresaCadasVar,
              cnpjEmpresaCadasServer : cnpjEmpresaCadasVar,
              ruaEmpresaCadasServer : ruaEmpresaCadasVar,
              numeroEmpresaCadasServer : numeroEmpresaCadasVar, 
              bairroEmpresaCadasServer : bairroEmpresaCadasVar,
              cidadeEmpresaCadasServer : cidadeEmpresaCadasVar, 
              estadoEmpresaCadasServer : estadoEmpresaCadasVar, 
              cepEmpresaCadasServer : cepEmpresaCadasVar, 
              tel1EmpresaCadasServer : tel1EmpresaCadasVar, 
              tel2EmpresaCadasServer : tel2EmpresaCadasVar, 
              emailUsuarioServer: emailUsuarioVar,
              senhaUsuarioServer: senhaUsuarioVar,
              nomeEmpresaUsuarioServer: nomeEmpresaUsuarioVar,              
          })
      })
  }
  function a_limpar(){
    input_nomeEmpresa.value = "";
    input_CNPJ.value = "";
    input_rua.value = "";
    input_numero.value = "";
    input_bairro.value = "";
    input_cidade.value = "";
    input_estado.value = "";
    input_CEP.value = "";
    input_telefone1.value = "";
    input_telefone2.value = "";
  }
</script>